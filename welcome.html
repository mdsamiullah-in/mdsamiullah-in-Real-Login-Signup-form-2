<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="welcome.css">
</head>
<body>

    <div id="container">

   <div id="header">
        <div id="title">
            <p id="welcomeUserName">Ahtesham</p>
        </div>

        <div id="img2"></div>
   </div>


  <div id="homePage">
     
        <div class="contents">
             <i class="fa-solid fa-briefcase" id="business"></i>
             <h3 id="companyTag">Business</h3>
         </div>



         <div id="formBox">

            <div id="form">
                <i class="fa-solid fa-xmark" id="cutForm"></i>
                
    
                <input required type="text" placeholder="Company name" id="companyName">
                <input required type="text" placeholder="Mailing name" id="mailingName">
               <input required type="text" placeholder="Address" id="address">
                <input type="number" placeholder="Phone number" id="phoneNumber">
                  <input type="file" accept="image/*" id="fileInput">
                <input type="number" placeholder="Fax number" id="FaxNumber">
                <input type="email" placeholder="E-mail" id="email">
                <input type="website" placeholder="Website" id="website">
                <input type="date" placeholder="Financial year begins from" id="FineYear">
                <input type="text" placeholder="Book Beginning From" id="BookBegin">
                <button id="create">CREATE COMPANY</button>
    
    
                
            </form>
        </div>
    
        </div>
        
    

      
         <div class="contents">
             <i class="fa-solid fa-pen"></i>
             <h3>About me</h3>
         </div>


         <div class="contents"  >
            <a href="contact.html"><i class="fa-solid fa-mobile"></i></a>
                <h3>Contacts</h3>
            </div>
        
    
         <div class="contents" onclick="logout()">
            <i class="fa-solid fa-right-to-bracket"></i>
                <h3>Logout</h3>
        </div>

  </div>



    <h2 id="logoutMessage">Please wait...</h2>

</div>


<script>

document.getElementById("cutForm").onclick = function(){
   document.getElementById("formBox").style.display = "none"
}


var company = document.getElementById("business");
company.onclick = function() {
    if (!localStorage.getItem("companyData")) {
        document.getElementById("formBox").style.display = "block";
    } else {

        location.replace("company.html")
    }
document.getElementById("cut").onclick = function() {
    document.getElementById("boxesdiv").style.display = "flex";
    document.getElementById("tag").style.display = "flex";
    document.getElementById("head").style.display = "flex";
    document.getElementById("formBox").style.display = "none";
}
}
function saveToLocalStorage() {
    // Gather all the values
    var companyName = document.getElementById("companyName").value;
    var mailingName = document.getElementById("mailingName").value;
    var address = document.getElementById("address").value;
    var phoneNumber = document.getElementById("phoneNumber").value;
    var faxNumber = document.getElementById("FaxNumber").value;
    var email = document.getElementById("email").value;
    var website = document.getElementById("website").value;
    var fineYear = document.getElementById("FineYear").value;
    var bookBegin = document.getElementById("BookBegin").value;
    document.getElementById("companyTag").value = "Open Company"
    // Check if company data already exists
    if (localStorage.getItem("companyData")) {
        alert("Company already exists. You cannot create another one.");
        return;
    }

    // Create an object to store all the data
    var companyData = {
        companyName: companyName,
        mailingName: mailingName,
        address: address,
        phoneNumber: phoneNumber,
        faxNumber: faxNumber,
        email: email,
        website: website,
        fineYear: fineYear,
        bookBegin: bookBegin
    };

    // Convert the object to a JSON string
    var companyDataJson = JSON.stringify(companyData);

    // Save to localStorage
    localStorage.setItem("companyData", companyDataJson);

    alert("Company data saved successfully.");
}

document.getElementById("create").onclick = function()
 {
        saveToLocalStorage();
        var companyName = document.getElementById("companyName");
        var mailingName = document.getElementById("mailingName");

        companyName.onchange = function() {
            if (isNaN(this.value)) {
                mailingName.onchange = function() {
                    if (this.value == companyName.value) {
                        this.value = "Enter different name to your company name";
                        this.style.color = "red";
                        this.style.borderColor = "red";
                        this.className = "animate__animated animate__pulse animate__infinite";
                        this.onclick = function() {
                            this.value = "";
                            this.style.color = "black";
                            this.style.border = "0.3px solid black";
                            this.className = "";
                        }
                    } else {
                        if (this.value.indexOf(companyName.value + ".pvt.ltd") != -1 || this.value.indexOf(companyName.value + ".govt.ltd") != -1) {
                            // Valid name format
                        } else {
                            this.value = "Enter company name.pvt.ltd or .govt.ltd";
                            this.style.color = "red";
                            this.style.borderColor = "red";
                            this.className = "animate__animated animate__pulse animate__infinite";
                            this.onclick = function() {
                                this.value = "";
                                this.style.color = "black";
                                this.style.border = "0.3px solid black";
                                this.className = "";
                            }
                        }
                    }
                }
            } else {
                this.value = "Number is not required";
                this.style.color = "red";
                this.style.borderColor = "red";
                this.className = "animate__animated animate__pulse animate__infinite";
                this.onclick = function() {
                    this.value = "";
                    this.style.border = "0.3px solid black";
                    this.style.color = "black";
                    this.className = "";
                }
            }
}}

function showing_pic_name(){
    var names = document.getElementById("welcomeUserName");
    var user_mail = sessionStorage.getItem("user_mail");
    var user_details = localStorage.getItem(user_mail);
    var user_data = JSON.parse(user_details);
    var fullname = user_data.name;
    names.innerHTML = atob(fullname)

    var img = document.getElementById("img2");
    var image_name = localStorage.getItem(user_mail+"images");
    img.style.background = "url("+ image_name+")"
    img.style.backgroundRepeat = "no-repeat";
    img.style.backgroundSize = "cover";
    img.style.backgroundPosition = "center";
    img.style.objectFit = "cover";
}
showing_pic_name()

function logout(){
    sessionStorage.clear();
    document.getElementById("logoutMessage").style.display = "block";
    setTimeout(function(){
        location.replace("index.html");
    },2000)
}

</script>
</body>
</html>
