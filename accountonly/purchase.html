<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weight Tracker Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        #dashboard {
            margin-bottom: 20px;
        }

        #dashboard h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        #dashboard .summary {
            margin-bottom: 20px;
        }

        #dashboard .summary p {
            margin: 0;
            font-size: 18px;
        }

        .weightHistoryContainer {
            display: flex;
            align-items: center;
            position: relative;
        }

        .arrow {
            cursor: pointer;
            font-size: 24px;
            user-select: none;
            padding: 0 10px;
            color: #007bff;
            display: none; /* Arrows hidden by default */
        }

        .scroll-container {
            overflow: hidden;
            width: calc(100% - 40px); /* Adjust width considering arrow space */
            display: flex;
        }

        #weightHistoryMainBox {
            display: flex;
            overflow-x: auto;
            white-space: nowrap;
            scroll-behavior: smooth;
        }

        .weightHistoryBox {
            flex-shrink: 0;
            width: 150px;
            margin-right: 10px;
            border: 1px solid #ccc;
            padding: 10px;
            box-sizing: border-box;
        }
    </style>
</head>
<body>

<div id="dashboard">
    <h1>Weight Tracker Dashboard</h1>
    <div class="summary">
        <p>Current Date: <span id="currentDate"></span></p>
        <p>Total Records: <span id="totalRecords"></span></p>
    </div>
    <div class="weightHistoryContainer">
        <div class="arrow left-arrow" id="leftArrow">&#9664;</div>
        <div class="scroll-container" id="scrollContainer">
            <div id="weightHistoryMainBox"></div>
        </div>
        <div class="arrow right-arrow" id="rightArrow">&#9654;</div>
    </div>
</div>

<button id="addWeight">Add Weight</button>

<script>
    document.getElementById("addWeight").onclick = function() {
        var uniqueId = Date.now(); // Unique ID for each set of inputs
        var div = document.createElement("div");
        div.className = 'weightHistoryBox';

        var weightHistoryMainBox = document.getElementById("weightHistoryMainBox");

        // Get current date
        var currentDate = new Date();
        var day = String(currentDate.getDate()).padStart(2, '0'); // Add leading zero if needed
        var month = String(currentDate.getMonth() + 1).padStart(2, '0'); // JavaScript months are 0-based, so +1
        var year = currentDate.getFullYear();

        // Format for input1
        var input1Value = `${day} / ${month}`;

        // Format for input2
        var monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
        var monthName = monthNames[currentDate.getMonth()];
        var input2Value = `${monthName} ${day}, ${year}`;

        div.innerHTML = `
            <ul>
                <li><input id="input1-${uniqueId}" value="${input1Value}" placeholder="01 / 01"></li>
                <li><input id="input2-${uniqueId}" value="${input2Value}" placeholder="Jan 01, 2024"></li>
                <li><input id="input3-${uniqueId}" placeholder="00 kg"></li>
                <li><input id="input4-${uniqueId}" placeholder="00 kg"></li>
                <li><input id="input5-${uniqueId}" placeholder="00 kg"></li>
                <li><i class="fa-solid fa-plus addWeightBox" onclick="saveWeight(${uniqueId})"></i></li>
            </ul>
        `;

        weightHistoryMainBox.appendChild(div);
        updateArrows();
    }

    function saveWeight(uniqueId) {
        var input1 = document.getElementById(`input1-${uniqueId}`).value;
        var input2 = document.getElementById(`input2-${uniqueId}`).value;
        var input3 = document.getElementById(`input3-${uniqueId}`).value;
        var input4 = document.getElementById(`input4-${uniqueId}`).value;
        var input5 = document.getElementById(`input5-${uniqueId}`).value;

        // Save to localStorage
        localStorage.setItem(`weightRecord-${uniqueId}`, JSON.stringify({
            input1: input1,
            input2: input2,
            input3: input3,
            input4: input4,
            input5: input5
        }));

        // Make date inputs readonly
        document.getElementById(`input1-${uniqueId}`).setAttribute('readonly', true);
        document.getElementById(`input2-${uniqueId}`).setAttribute('readonly', true);

        // Hide the icon after saving
        document.querySelector(`.addWeightBox[onclick="saveWeight(${uniqueId})"]`).style.display = 'none';

        updateDashboard(); // Update dashboard after saving
        updateArrows();
    }

    function updateDashboard() {
        var totalRecords = 0;
        var weightHistoryMainBox = document.getElementById("weightHistoryMainBox");
        weightHistoryMainBox.innerHTML = ""; // Clear the existing content

        // Loop through all items in localStorage
        for (var i = 0; i < localStorage.length; i++) {
            var key = localStorage.key(i);
            if (key.startsWith("weightRecord-")) {
                totalRecords++;
                var record = JSON.parse(localStorage.getItem(key));

                var uniqueId = key.split("-")[1]; // Extract the uniqueId
                var div = document.createElement("div");
                div.className = 'weightHistoryBox';

                div.innerHTML = `
                    <ul>
                        <li><input id="input1-${uniqueId}" value="${record.input1}" placeholder="01 / 01" readonly></li>
                        <li><input id="input2-${uniqueId}" value="${record.input2}" placeholder="Jan 01, 2024" readonly></li>
                        <li><input id="input3-${uniqueId}" value="${record.input3}" placeholder="00 kg"></li>
                        <li><input id="input4-${uniqueId}" value="${record.input4}" placeholder="00 kg"></li>
                        <li><input id="input5-${uniqueId}" value="${record.input5}" placeholder="00 kg"></li>
                    </ul>
                `;

                weightHistoryMainBox.appendChild(div);
            }
        }

        // Update the total records count on the dashboard
        document.getElementById("totalRecords").innerText = totalRecords;
        updateArrows();
    }

    function updateArrows() {
        var weightHistoryMainBox = document.getElementById("weightHistoryMainBox");
        var leftArrow = document.getElementById("leftArrow");
        var rightArrow = document.getElementById("rightArrow");

        // Show or hide arrows based on content overflow
        if (weightHistoryMainBox.scrollWidth > weightHistoryMainBox.clientWidth) {
            leftArrow.style.display = 'block';
            rightArrow.style.display = 'block';
        } else {
            leftArrow.style.display = 'none';
            rightArrow.style.display = 'none';
        }
    }

    document.getElementById("leftArrow").onclick = function() {
        var weightHistoryMainBox = document.getElementById("weightHistoryMainBox");
        weightHistoryMainBox.scrollLeft -= 150; // Scroll left
    }

    document.getElementById("rightArrow").onclick = function() {
        var weightHistoryMainBox = document.getElementById("weightHistoryMainBox");
        weightHistoryMainBox.scrollLeft += 150; // Scroll right
    }

    window.onload = function() {
        // Display current date on dashboard
        var currentDate = new Date();
        var day = String(currentDate.getDate()).padStart(2, '0');
        var month = String(currentDate.getMonth() + 1).padStart(2, '0');
        var year = currentDate.getFullYear();
        document.getElementById("currentDate").innerText = `${day} / ${month} / ${year}`;

        updateDashboard(); // Load records and update dashboard on page load
        updateArrows(); // Check for arrows on page load
    }
</script>

</body>
</html>
